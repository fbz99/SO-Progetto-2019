Progetto SO - Bozzardini Francesco 886358 / Bombieri Roberto 882818

Il progetto è formato da vari file ognuno con uno scopo preciso:
- i file Main, Giocatore e Pedina che si occupano di gestire il funzionamento del gioco;
- i file della libreria in cui teniamo tutti i metodi che usiamo per compiere diverse operazioni;
- il file delle variabili (Variabili.conf) che possiamo cambiare per gestire la modalità di gioco che decidiamo di usare;
- il Makefile per compilare e eseguire il nostro gioco.

Ogni processo si occupa di leggere i dati per la partita e salvarle in variabili per il corretto funzionamento del gioco.
La scacchiera è stata implementata come un array di interi di dimensione SO_BASE * SO_ALTEZZA e contiene valori superiori al 64 (Ovvero in codice ascii le lettere maiuscole) per i giocatori, mentre quelli compresi tra 0 e 64 saranno le bandierine (in funzione del proprio punteggio).
La scacchiera si trova in memoria condivisa per permettere a tutti i processi di accedere al contenuto con una chiave specifica.
Per ogni cella della scacchiera viene creato un semaforo corrispondente in un array apposito in modo da gestire l'accesso alle celle della scacchiera (es. scacchiera[i] --> semafori[i])
Il master si occupa di creare tramite una fork i processi dei giocatori e a sua volta ogni giocatore creerà il numero di pedine necessarie. Tutte le informazioni riguardanti il numero di giocatori e di pedine da creare sono contenuti nel file delle variabili.
Una volta terminata la creazione dei giocatori da parte del master, quest'ultimo dovrà aspettare (a causa del semaforo aspetta_zero) che  ogni giocatore piazzi le pedine sulla scacchiera in memoria condivisa (un giocatore alla volta grazie ad un semaforo di mutua esclusione); le pedine verranno posizionate generando una posizione casuale sulla scacchiera e portando il semaforo corrispondente a quella cella a zero così che le altre pedine non possano essere posizionate sulla stessa.
Ogni giocatore invierà a tutte le pedine tramite una coda di messaggi le informazioni necessarie come la loro posizione, la posizione obiettivo che corrisponde alla bandierina più vicina alla pedina in questione (calcolata usando la manhattan distance, ovvero la distanza tra un punto A e un punto B all'interno di una matrice tenendo in considerazione che non si possono utilizzare le diagonali), il suo PID e il numero di mosse che hanno a disposizione, dato dalle variabili nel file di configurazione.
Una volta impostata la posizione obiettivo, ogni pedina si muoverà all'interno della scacchiera in direzione della propria bandierina obiettivo fino a quando non la raggiungerà; nel caso in cui la bandierina sia già stata presa da un’altra pedina, la prima pedina non sarà in grado di raggiungere la sua posizione obiettivo e si fermerà prima di arrivarci non ottenendo punti per quel round.  
Il gioco partirà nel momento in cui il master darà il via al round (ovvero quando tutte le pedine e tutte le bandierine sono state inserite nella scacchiera), facendo anche partire un timer per gestire il tempo massimo di ogni round oltre il quale il gioco termina.
Le pedine si muoveranno all'interno dell'array come fosse una matrice e azzerando ad ogni passo il semaforo della cella in cui stanno arrivando per evitare che un'altra pedina si sovrapponga alla loro posizione e riportando a 1 quello della cella in cui si trovavano, così da permettere ad altre pedine di andarci.
Ogni volta che una pedina riesce a recuperare una bandierina viene inviato un messaggio al processo del giocatore a cui appartiene tale pedina che si occupa di aggiornare il punteggio totale ottenuto nel round e aggiornare il numero di mosse rimanenti; a sua volta il processo giocatore invia un messaggio tramite una nuova cosa di messaggi al processo master che decrementa il numero di bandierine; per eseguire queste operazioni il processo master blocca momentaneamente l'esecuzione del programma per poi farlo ripartire non appena vengano aggiornati tutti i dati.
Se alla fine del round il contatore delle bandierine segna che queste siano state recuperate tutte allora si potrà cominciare il nuovo round e verranno azzerate il numero di mosse di ogni pedina, verranno ridistribuite le bandierine casualmente sulla scacchiera ma verranno mantenuti i punteggi e la posizione attuale delle pedine. Se non dovessero essere state prese tutte le bandierine, la partita terminerà e verrà inviato un segnale di interruzione tramite un handler che ne segnalerà la conclusione.
In caso di interruzione durante la partita utilizzando la combinazione di tasti CTRL+C verrà intercettato il segnale di SIGINT così da fermare manualmente l'esecuzione del programma. In ogni caso, sia tramite il richiamo della SIGINT, sia nel caso in cui il programma finisca autonomamente, vengono liberate tutte le memorie condivise precedentemente create, vengono cancellati tutti i semafori e le code di messaggi.
Nel momento in cui il programma termina verranno stampate le metriche della partita e un’ultima scacchiera che riporterà la posizione finale di tutte le pedine e le bandierine rimaste sulla scacchiera.
